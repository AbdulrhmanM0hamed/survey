# ๐งช ุฏููู ุงุฎุชุจุงุฑ ุงูู API

## ูุนูููุงุช ุงูู API

```
Base URL: http://45.94.209.137:8080/api
```

### Endpoints ุงููุชุงุญุฉ:

1. **ูุงุฆูุฉ ุงูุงุณุชุจูุงูุงุช**
   - `GET /Surveys`
   - ูุฑุฌุน ูุงุฆูุฉ ุจุฌููุน ุงูุงุณุชุจูุงูุงุช ุงููุดุทุฉ

2. **ุชูุงุตูู ุงุณุชุจูุงู ูุญุฏุฏ**
   - `GET /Surveys/{id}/exportData`
   - ูุฑุฌุน ุชูุงุตูู ุงูุงุณุชุจูุงู ุงููุงูู ูุน ุงูุฃูุณุงู ูุงูุฃุณุฆูุฉ ูุงูุดุฑูุท

---

## ๐ ุงุฎุชุจุงุฑ ุงูุจูุงูุงุช ุงููุนููุฉ

### ุงูุงุณุชุจูุงู ุงูุชุฌุฑูุจู ุงูุตุบูุฑ

**ID:** `10`  
**Code:** `DEMO_SMALL_SURVEY`  
**Name:** `ุงุณุชุจูุงู ุชุฌุฑูุจู ุตุบูุฑ`

#### ุงูุจููุฉ:

```
ุงููุณู ุงูุฃูู: ุจูุงูุงุช ุงูุฃุณุฑุฉ ูุงูุฃูุฑุงุฏ
โโโ ูุฌููุนุฉ 1: ุจูุงูุงุช ุฃุณุงุณูุฉ ุนู ุงูุฃุณุฑุฉ (ID: 82)
โ   โโโ ุณุคุงู 1: ุนุฏุฏ ุฃูุฑุงุฏ ุงูุฃุณุฑุฉ (ID: 10850) - Integer
โ   โ   โโโ ุดุฑุท: ููุฑุฑ ุงููุฌููุนุฉ 83 ุจุนุฏุฏ ุงูุฃูุฑุงุฏ
โ   โโโ ุณุคุงู 2: ูู ุนูู ุงูุฃุณุฑุฉ ุฏูููุ (ID: 10851) - Single Choice
โ   โ   โโโ ุดุฑุท 1: ููุธูุฑ ุณุคุงู "ูููุฉ ุงูุฏูู" ุฅุฐุง = ูุนู
โ   โ   โโโ ุดุฑุท 2: ููุธูุฑ "ุงููุณู ุงูุซุงูู" ุฅุฐุง = ูุนู
โ   โโโ ุณุคุงู 3: ูููุฉ ุงูุฏูู (ID: 10852) - Integer
โ       โโโ (ูุฎูู ุงูุชุฑุงุถูุงูุ ูุธูุฑ ุจุดุฑุท)
โ
โโโ ูุฌููุนุฉ 2: ูุชูุฉ ุจูุงูุงุช ูุฑุฏ ูู ุฃูุฑุงุฏ ุงูุฃุณุฑุฉ (ID: 83)
โ   โโโ ุณุคุงู 1: ุฑูู ุงููุฑุฏ (ID: 10853) - Integer
โ   โโโ ุณุคุงู 2: ุงูุฌูุณ (ID: 10854) - Single Choice
โ   โโโ ุณุคุงู 3: ุงูุญุงูุฉ ุงูุชุนููููุฉ (ID: 10855) - Single Choice
โ   โโโ (ุชุชูุฑุฑ ูุฐู ุงููุฌููุนุฉ ุจุนุฏุฏ ุฃูุฑุงุฏ ุงูุฃุณุฑุฉ)
โ
โโโ ุณุคุงู ูุจุงุดุฑ: ููุงุญุธุงุช ุนุงูุฉ (ID: 10856) - Text

ุงููุณู ุงูุซุงูู: ูุณุชูู ุงูุฑุถุง (ID: 10059)
โโโ ุณุคุงู 1: ูุฏู ุงูุฑุถุง (ID: 10857) - Single Choice
โ   โโโ ุดุฑุท: ููุฎูู ุณุคุงู ุงูุชุนููู ุฅุฐุง = ุฑุงุถู ุชูุงูุงู
โโโ ุณุคุงู 2: ุฃุณุจุงุจ ุนุฏู ุงูุฑุถุง (ID: 10858) - Text
    โโโ (ูุฎูู ุฅุฐุง ูุงู ุฑุงุถูุงู ุชูุงูุงู)
```

---

## ๐ฏ ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ

### โ ุณููุงุฑูู 1: ุงุฎุชุจุงุฑ ุงูุชูุฑุงุฑ (Repetition)

**ุงูุฎุทูุงุช:**
1. ุงูุชุญ ุงูุงุณุชุจูุงู `DEMO_SMALL_SURVEY`
2. ูู ุณุคุงู "ุนุฏุฏ ุฃูุฑุงุฏ ุงูุฃุณุฑุฉ"ุ ุฃุฏุฎู: `3`
3. ุงุถุบุท ุงูุชุงูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ูุฌุจ ุฃู ุชุธูุฑ ูุฌููุนุฉ "ุจูุงูุงุช ุงููุฑุฏ" **3 ูุฑุงุช**
- ูู ุชูุฑุงุฑ ุจุนููุงู "ุงูุชูุฑุงุฑ 1"ุ "ุงูุชูุฑุงุฑ 2"ุ "ุงูุชูุฑุงุฑ 3"
- ูู ุชูุฑุงุฑ ูุญุชูู ุนูู ููุณ ุงูุฃุณุฆูุฉ ุงูุซูุงุซุฉ

**ุงูููุฏ ุงููุณุคูู:**
```dart
// ูู SurveyDetailsViewModel
int getGroupRepetitions(int groupId) {
  return _groupRepetitions[groupId] ?? 1;
}

// ูู ุงูุดุงุดุฉ
...List.generate(repetitions, (instanceIndex) { ... })
```

---

### โ ุณููุงุฑูู 2: ุงุฎุชุจุงุฑ Show Condition

**ุงูุฎุทูุงุช:**
1. ูู ุณุคุงู "ูู ุนูู ุงูุฃุณุฑุฉ ุฏูููุ"ุ ุงุฎุชุฑ: `ูุนู`
2. ุฑุงูุจ ุงูุฃุณุฆูุฉ ุงูุชุงููุฉ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ุณุคุงู "ูููุฉ ุงูุฏูู" ูุธูุฑ ููุฑุงู
- "ุงููุณู ุงูุซุงูู: ูุณุชูู ุงูุฑุถุง" ูุธูุฑ ูู ูุงุฆูุฉ ุงูุฃูุณุงู

**ุฅุฐุง ุบูุฑุช ุงูุฅุฌุงุจุฉ ุฅูู `ูุง`:**
- ุณุคุงู "ูููุฉ ุงูุฏูู" ูุฎุชูู
- "ุงููุณู ุงูุซุงูู" ูุฎุชูู

**ุงูููุฏ ุงููุณุคูู:**
```dart
case ConditionAction.show:
  _questionVisibility[questionId] = true;
  _sectionVisibility[sectionId] = true;
```

---

### โ ุณููุงุฑูู 3: ุงุฎุชุจุงุฑ Hide Condition

**ุงูุฎุทูุงุช:**
1. ุงุฎุชุฑ `ูุนู` ูู "ูู ุนูู ุงูุฃุณุฑุฉ ุฏูููุ" (ูุฅุธูุงุฑ ุงููุณู ุงูุซุงูู)
2. ุงูุชูู ุฅูู ุงููุณู ุงูุซุงูู
3. ูู ุณุคุงู "ูุฏู ุงูุฑุถุง"ุ ุงุฎุชุฑ: `ุฑุงุถู ุชูุงูุงู`

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ุณุคุงู "ุฃุณุจุงุจ ุนุฏู ุงูุฑุถุง" ูุฎุชูู ููุฑุงู

**ุฅุฐุง ุบูุฑุช ุงูุฅุฌุงุจุฉ ุฅูู ุฃู ุฎูุงุฑ ุขุฎุฑ:**
- ุณุคุงู "ุฃุณุจุงุจ ุนุฏู ุงูุฑุถุง" ูุธูุฑ ูุฑุฉ ุฃุฎุฑู

**ุงูููุฏ ุงููุณุคูู:**
```dart
case ConditionAction.hide:
  _questionVisibility[questionId] = false;
```

---

## ๐ ุงุฎุชุจุงุฑ ุฏูุฑุฉ ุงูุชุญุฏูุซ (setState Cycle)

### ุงูุงุฎุชุจุงุฑ:

1. ุฃุฏุฎู ุนุฏุฏ ุงูุฃูุฑุงุฏ: `2`
   - โ ูุฌุจ ุฃู ุชุธูุฑ ูุฌููุนุฉ ุงูุฃูุฑุงุฏ ูุฑุชูู
   
2. ุบููุฑ ุงูุนุฏุฏ ุฅูู: `5`
   - โ ูุฌุจ ุฃู ุชุธูุฑ ูุฌููุนุฉ ุงูุฃูุฑุงุฏ 5 ูุฑุงุช ููุฑุงู
   
3. ุงุฎุชุฑ "ูุนู" ููุฏููู
   - โ ุณุคุงู ูููุฉ ุงูุฏูู ูุธูุฑ
   - โ ุงููุณู ุงูุซุงูู ูุธูุฑ
   
4. ุบููุฑ ุฅูู "ูุง"
   - โ ุณุคุงู ูููุฉ ุงูุฏูู ูุฎุชูู
   - โ ุงููุณู ุงูุซุงูู ูุฎุชูู
   
5. ุบููุฑ ูุฑุฉ ุฃุฎุฑู ุฅูู "ูุนู"
   - โ ูู ุดูุก ูุนูุฏ ููุธููุฑ

**ูุฐุง ูุซุจุช ุฃู:**
- `notifyListeners()` ูุนูู ุจุดูู ุตุญูุญ
- `_resetConditionsToDefault()` ูุนูุฏ ุชููุฆุฉ ุงูุญุงูุฉ
- `_evaluateAllConditions()` ูุนูุฏ ุงูุชูููู ุจุดูู ุตุญูุญ
- ุงููุงุฌูุฉ ุชุชุญุฏุซ ููุฑุงู

---

## ๐ฑ ุงุฎุชุจุงุฑ ุงูู Offline Mode

### ุงูุฎุทูุงุช:

1. **ูุน ุงูุฅูุชุฑูุช:**
   - ุงูุชุญ ุงูุชุทุจูู
   - ุงูุชุญ ุงูุงุณุชุจูุงู `DEMO_SMALL_SURVEY`
   - ุฃุฌุจ ุนูู ุจุนุถ ุงูุฃุณุฆูุฉ
   - ูุฌุจ ุฃู ุชูุญูุธ ุงูุฅุฌุงุจุงุช ูู Hive

2. **ุจุฏูู ุฅูุชุฑูุช:**
   - ุฃุบูู ุงูุฅูุชุฑูุช ุชูุงูุงู
   - ุฃุบูู ุงูุชุทุจูู ูุฃุนุฏ ูุชุญู
   - ูุฌุจ ุฃู ููุชุญ ุงูุงุณุชุจูุงู ูู ุงูู Cache
   - ูุฌุจ ุฃู ุชุธูุฑ ุงูุฅุฌุงุจุงุช ุงูุณุงุจูุฉ
   - ูุฌุจ ุฃู ุชุณุชูุฑ ูู ุงูุฅุฌุงุจุฉ ุจุดูู ุทุจูุนู

3. **ุงูุนูุฏุฉ ููุฅูุชุฑูุช:**
   - ุฃุนุฏ ุชุดุบูู ุงูุฅูุชุฑูุช
   - ุงุณุญุจ ููุชุญุฏูุซ (Pull-to-refresh)
   - ูุฌุจ ุฃู ุชูุญุฏูุซ ุงูุจูุงูุงุช

---

## ๐๏ธ ุงุฎุชุจุงุฑ ุงูู API ูุฏููุงู

### ุจุงุณุชุฎุฏุงู Browser ุฃู Postman:

```bash
# ุฌูุจ ูุงุฆูุฉ ุงูุงุณุชุจูุงูุงุช
GET http://45.94.209.137:8080/api/Surveys

# ุฌูุจ ุชูุงุตูู ุงูุงุณุชุจูุงู ุงูุชุฌุฑูุจู
GET http://45.94.209.137:8080/api/Surveys/10/exportData
```

### ุงููุชูุฌุฉ ุงููุชููุนุฉ:

```json
{
  "errorCode": 0,
  "errorMessage": "Operation succeeded",
  "data": {
    "id": 10,
    "code": "DEMO_SMALL_SURVEY",
    "name": "ุงุณุชุจูุงู ุชุฌุฑูุจู ุตุบูุฑ",
    "sections": [...],
    // ... ุจููุฉ ุงูุจูุงูุงุช
  }
}
```

---

## โ Checklist ููุชุญูู

ูุจู ูุดุฑ ุงูุชุทุจููุ ุชุญูู ูู:

- [ ] ุฌููุน ุงูุฃุณุฆูุฉ ุชุธูุฑ ุจุดูู ุตุญูุญ
- [ ] ุดุฑูุท Show ุชุนูู
- [ ] ุดุฑูุท Hide ุชุนูู
- [ ] ุดุฑูุท Repetition ุชุนูู ุนูู Groups
- [ ] ุงูุชูุฑุงุฑ ูุธูุฑ ุงูุนุฏุฏ ุงูุตุญูุญ
- [ ] ุชุบููุฑ ุงูุฅุฌุงุจุฉ ูุนูุฏ ุชูููู ุงูุดุฑูุท ููุฑุงู
- [ ] ุงูุฅุฌุงุจุงุช ุชูุญูุธ ูุญููุงู
- [ ] ุงูุชุทุจูู ูุนูู ุจุฏูู ุฅูุชุฑูุช
- [ ] Pull-to-refresh ููุญุฏุซ ุงูุจูุงูุงุช
- [ ] Navigation ุจูู ุงูุฃูุณุงู ูุนูู
- [ ] Progress bar ูุนุฑุถ ุงููุณุจุฉ ุงูุตุญูุญุฉ
- [ ] Dialog ุงูุฅููุงุก ูุธูุฑ
- [ ] ุงูุฅุฌุงุจุงุช ุชูุญูุธ ุนูุฏ ุงูุฅููุงุก

---

## ๐ ูุดุงูู ูุญุชููุฉ ูุญููููุง

### ุงููุดููุฉ: ุงูุดุฑูุท ูุง ุชุนูู

**ุงูุญู:**
1. ุชุญูู ูู ุงูู logs ูู `DioClient`
2. ุชุญูู ุฃู ุงูุจูุงูุงุช ุชูุญููู ุจุดูู ุตุญูุญ
3. ุชุญูู ูู `sourceConditions` ูู ุงูู JSON

### ุงููุดููุฉ: ุงูุชูุฑุงุฑ ูุง ูุนูู

**ุงูุญู:**
1. ุชุญูู ุฃู ุงูุณุคุงู ูู ููุน `Integer`
2. ุชุญูู ุฃู `_groupRepetitions` ูุชุญุฏุซ
3. ุฃุถู `print` ูู `getGroupRepetitions`

### ุงููุดููุฉ: ุงููุงุฌูุฉ ูุง ุชุชุญุฏุซ

**ุงูุญู:**
1. ุชุญูู ุฃู `notifyListeners()` ููุณุชุฏุนู
2. ุชุญูู ุฃู `Consumer` ููุฌูุฏ ูู ุงูุดุงุดุฉ
3. ุชุญูู ุฃู `ChangeNotifierProvider` ููุฌูุฏ ูู `main.dart`

---

## ๐ ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ ุงูููุชุฑุญุฉ

| ุงูุณุคุงู | ุงููููุฉ | ุงููุชูุฌุฉ ุงููุชููุนุฉ |
|--------|--------|------------------|
| ุนุฏุฏ ุงูุฃูุฑุงุฏ | `1` | ุชูุฑุงุฑ ูุงุญุฏ |
| ุนุฏุฏ ุงูุฃูุฑุงุฏ | `5` | 5 ุชูุฑุงุฑุงุช |
| ุนุฏุฏ ุงูุฃูุฑุงุฏ | `10` | 10 ุชูุฑุงุฑุงุช |
| ูู ุนูู ุงูุฃุณุฑุฉ ุฏูููุ | `ูุนู` | ุฅุธูุงุฑ ุณุคุงู ุงูุฏูู + ุงููุณู ุงูุซุงูู |
| ูู ุนูู ุงูุฃุณุฑุฉ ุฏูููุ | `ูุง` | ุฅุฎูุงุก ุณุคุงู ุงูุฏูู + ุงููุณู ุงูุซุงูู |
| ูุฏู ุงูุฑุถุง | `ุฑุงุถู ุชูุงูุงู` | ุฅุฎูุงุก ุณุคุงู ุงูุชุนููู |
| ูุฏู ุงูุฑุถุง | `ุบูุฑ ุฑุงุถู` | ุฅุธูุงุฑ ุณุคุงู ุงูุชุนููู |

---

**๐ ูุธุงู ุงูุงุฎุชุจุงุฑ ุฌุงูุฒ ูุงูุชุทุจูู ูุนูู ุจููุงุกุฉ!**
